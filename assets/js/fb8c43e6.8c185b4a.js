/*! For license information please see fb8c43e6.8c185b4a.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[98348],{41535:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),i=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,h={};function v(e,t,n){this.props=e,this.context=t,this.refs=h,this.updater=n||y}function b(){}function k(e,t,n){this.props=e,this.context=t,this.refs=h,this.updater=n||y}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=v.prototype;var g=k.prototype=new b;g.constructor=k,m(g,v.prototype),g.isPureReactComponent=!0;var w=Array.isArray,O=Object.prototype.hasOwnProperty,j={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var a,l={},s=null,o=null;if(null!=t)for(a in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(s=""+t.key),t)O.call(t,a)&&!R.hasOwnProperty(a)&&(l[a]=t[a]);var i=arguments.length-2;if(1===i)l.children=r;else if(1<i){for(var u=Array(i),c=0;c<i;c++)u[c]=arguments[c+2];l.children=u}if(e&&e.defaultProps)for(a in i=e.defaultProps)void 0===l[a]&&(l[a]=i[a]);return{$$typeof:n,type:e,key:s,ref:o,props:l,_owner:j.current}}function x(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var E=/\/+/g;function N(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function _(e,t,a,l,s){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var i=!1;if(null===e)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case n:case r:i=!0}}if(i)return s=s(i=e),e=""===l?"."+N(i,0):l,w(s)?(a="",null!=e&&(a=e.replace(E,"$&/")+"/"),_(s,t,a,"",(function(e){return e}))):null!=s&&(x(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,a+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(E,"$&/")+"/")+e)),t.push(s)),1;if(i=0,l=""===l?".":l+":",w(e))for(var u=0;u<e.length;u++){var c=l+N(o=e[u],u);i+=_(o,t,a,c,s)}else if(c=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"==typeof c)for(e=c.call(e),u=0;!(o=e.next()).done;)i+=_(o=o.value,t,a,c=l+N(o,u++),s);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function q(e,t,n){if(null==e)return e;var r=[],a=0;return _(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},A={transition:null}},27378:(e,t,n)=>{n(41535)},61185:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>s,default:()=>p,frontMatter:()=>l,metadata:()=>o,toc:()=>u});var r=n(87462),a=(n(27378),n(3905));const l={title:"validateRequired"},s=void 0,o={unversionedId:"api/validateRequired",id:"api/validateRequired",title:"validateRequired",description:"Returns a string message if any keys of requiredDefaults are missing in processedEntity. This",source:"@site/../docs/rest/api/validateRequired.md",sourceDirName:"api",slug:"/api/validateRequired",permalink:"/rest/api/validateRequired",draft:!1,editUrl:"https://github.com/coinbase/rest-hooks/edit/master/docs/rest/api/validateRequired.md",tags:[],version:"current",lastUpdatedBy:"Nathaniel Tucker",lastUpdatedAt:1671554583,formattedLastUpdatedAt:"Dec 20, 2022",frontMatter:{title:"validateRequired"},sidebar:"docs",previous:{title:"schema.All",permalink:"/rest/api/All"}},i={},u=[{value:"Partial/full results",id:"partialfull-results",level:2},{value:"Optional fields",id:"optional-fields",level:2},{value:"Full results only have optional fields",id:"full-results-only-have-optional-fields",level:3}],c={toc:u};function p(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"function validateRequired(processedEntity: any, requiredDefaults: Record<string, unknown>): string | undefined;\n")),(0,a.kt)("p",null,"Returns a string message if any keys of ",(0,a.kt)("inlineCode",{parentName:"p"},"requiredDefaults")," are missing in ",(0,a.kt)("inlineCode",{parentName:"p"},"processedEntity"),". This\ncan be used to ",(0,a.kt)("a",{parentName:"p",href:"/rest/api/Entity#validate"},"validate")," fields that must be provided."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"class CustomBaseEntity extends Entity {\n  static validate(processedEntity) {\n    return validateRequired(processedEntity, this.defaults) || super.validate(processedEntity);\n  }\n}\n")),(0,a.kt)("h2",{id:"partialfull-results"},"Partial/full results"),(0,a.kt)("p",null,"This can be useful to automatically validate for ",(0,a.kt)("a",{parentName:"p",href:"/docs/concepts/validation#partial-results"},"partial results")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"class SummaryAnalysis extends Entity {\n  readonly id: string = '';\n  readonly createdAt: Date = new Date(0);\n  readonly meanValue: number = 0;\n  readonly title: string = '';\n\n  pk() {\n    return this.id;\n  }\n}\n\nclass FullAnalysis extends SummaryAnalysis {\n  readonly graph: number[] = [];\n}\n")),(0,a.kt)("h2",{id:"optional-fields"},"Optional fields"),(0,a.kt)("p",null,"In case we have a field that won't always be present (like ",(0,a.kt)("inlineCode",{parentName:"p"},"lastRun")," here), we can simply\n'exclude' it from the fields we require."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"class FullAnalysis extends SummaryAnalysis {\n  readonly graph: number[] = [];\n  readonly lastRun?: Date = new Date(0);\n\n  static schema = {\n    lastRun: Date,\n  }\n\n  static validate(processedEntity) {\n    return validateRequired(processedEntity, exclude(this.defaults, ['lastRun']));\n  }\n}\n")),(0,a.kt)("details",{collapsed:!0},(0,a.kt)("summary",null,(0,a.kt)("b",null,"exclude()")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="exclude"',title:'"exclude"'},"function exclude<O extends Record<string, unknown>>(\n  obj: O,\n  keys: string[],\n): Partial<O> {\n  const r: any = {};\n  Object.keys(obj).forEach(k => {\n    if (!keys.includes(k)) r[k] = obj[k];\n  });\n  return r;\n}\n"))),(0,a.kt)("h3",{id:"full-results-only-have-optional-fields"},"Full results only have optional fields"),(0,a.kt)("p",null,"In case every field of the 'full' resource was optional:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"class FullAnalysis extends SummaryAnalysis {\n  readonly graph?: number[] = [];\n  readonly lastRun?: Date = new Date(0);\n\n  static schema = {\n    lastRun: Date,\n  }\n\n  static validate(processedEntity) {\n    return validateRequired(processedEntity, exclude(this.defaults, ['graph', 'lastRun']));\n  }\n}\n")),(0,a.kt)("p",null,"This code would not successfully know to fetch the 'full' resource if the summary is already provided.\nThere would be no way of knowing whether the fields simply don't exist for that data, or were not fetched.\nIn this case, it is best to provide a ",(0,a.kt)("inlineCode",{parentName:"p"},"null")," default for ",(0,a.kt)("em",{parentName:"p"},"at least")," one field."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"class FullAnalysis extends SummaryAnalysis {\n  readonly graph: number[] = null;\n  readonly lastRun?: Date = new Date(0);\n\n  static schema = {\n    lastRun: Date,\n  }\n\n  static validate(processedEntity) {\n    return validateRequired(processedEntity, exclude(this.defaults, ['lastRun']));\n  }\n}\n")),(0,a.kt)("p",null,"This enables the client to understand whether the 'full' resource has been fetched at all."))}p.isMDXComponent=!0},3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>f});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var i=r.createContext({}),u=function(e){var t=r.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},c=function(e){var t=u(e.components);return r.createElement(i.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,l=e.originalType,i=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),d=u(n),f=a,y=d["".concat(i,".").concat(f)]||d[f]||p[f]||l;return n?r.createElement(y,s(s({ref:t},c),{},{components:n})):r.createElement(y,s({ref:t},c))}));function f(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=n.length,s=new Array(l);s[0]=d;var o={};for(var i in t)hasOwnProperty.call(t,i)&&(o[i]=t[i]);o.originalType=e,o.mdxType="string"==typeof e?e:a,s[1]=o;for(var u=2;u<l;u++)s[u]=n[u];return r.createElement.apply(null,s)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);